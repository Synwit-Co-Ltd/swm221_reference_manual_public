.. ----------------------------------------------------------------------------------------------------

通用配置寄存器CR
^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - CR

     - 0x00

     - R/W

     - 0x00000018

     - 通用配置寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`7` --

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`7` --

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - --

     - :cspan:`3` DNF

     - HS

     - MASTER

     - EN



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:7

     - --

     - RO

     - --

   * - 6:3

     - DNF

     - R/W

     - Receive SDA、SCL数字噪声滤波（Digital Noise Filter）。

       0000：滤波不使能。

       0001：滤波使能，且滤波能力最大1个系统时钟。

       ……

       1111：滤波使能，且滤波能力最大15个系统时钟。


   * - 2

     - HS

     - R/WAC

     - High-Speed mode。仅在master模式下有效。

       0：Standard-mode, Fast-mode, Fast-mode Plus。SCL为open-drain输出。

       1：High-Speed mode。SCL为电流源上拉电路输出。Master发送STOP后，硬件自动清除本位。


   * - 1

     - MASTER

     - R/W

     - 模式控制。

       0：slave模式

       1：master模式


   * - 0

     - EN

     - R/W

     - i2c总线使能。

       0：不使能。

       1：使能。




.. ----------------------------------------------------------------------------------------------------

通用状态寄存器SR
^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - SR

     - 0x04

     - RO

     - 0x00000000

     - 通用状态寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`7` --

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`7` --

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`4` --

     - SDA

     - SCL

     - BUSY



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:3

     - --

     - RO

     - --

   * - 2

     - SDA

     - RO

     - I2C SDA状态。不受I2C总线使能影响。

       0：I2C SDA为低。

       1：I2C SDA为高。


   * - 1

     - SCL

     - RO

     - I2C SCL状态。不受I2C总线使能影响。

       0：I2C SCL为低。

       1：I2C SCL为高。


   * - 0

     - BUSY

     - RO

     - 总线忙状态。本位不受CR.EN位控制，当EN不使能时，仍然检测总线忙状态。

       0：总线不忙。

       1：总线忙，I2C总线START至STOP期间有效。




.. ----------------------------------------------------------------------------------------------------

通用传输寄存器TR
^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - TR

     - 0x08

     - R/W

     - 0x00000002

     - 通用传输寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`7` --

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`1` --

     - :cspan:`1` SLVRDS

     - SLVSTR

     - SLVWR

     - SLVRD

     - SLVACT

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`4` --

     - TXCLR

     - RXACK

     - TXACK



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:14

     - --

     - RO

     - --

   * - 13:12

     - SLVRDS

     - RO

     - Slave接收到的数据类型。仅在Slave模式有效。

       00：RXDATA为空。

       01：接收到的是地址。

       10：接收到的是数据。

       11：接收到的是master code。仅当MCDE=1时有效。


   * - 11

     - SLVSTR

     - RO

     - Slave clock stretching忙状态。仅在slave模式有效。

       0：无clock stretching。

       1：有clock stretching。


   * - 10

     - SLVWR

     - RO

     - Slave写状态。仅在slave模式有效。

       1：Slave接收到master的写请求后有效。

       0：slave接收到master的读请求或STOP后，自动清除。


   * - 9

     - SLVRDD

     - RO

     - Slave读状态。仅在slave模式有效。

       1：Slave接收到master的读请求后有效。

       0：slave接收到master的写请求或STOP后，自动清除。


   * - 8

     - SLVACT

     - RO

     - Slave活跃状态。仅在slave模式有效。

       0：slave器件处于非活跃状态

       1：slave器件处于活跃状态。地址匹配成功后本位有效；接收到STOP，或Sr后的地址匹配不成功，自动清除。


   * - 7:3

     - --

     - RO

     - --

   * - 2

     - TXCLR

     - RO

     - 发送数据寄存器清空。硬件自动清除。

       0：不清空。

       1：清空TXDATA中的数据，并更新TXE位。


   * - 1

     - RXACK

     - RO

     - 当作为transmitter时，接收到的ACK/NACK。硬件置位，TXDONE有效后即可查询此位；接收到Sr或STOP会将此位清零。

       0：接收到ACK

       1：接收到NACK


   * - 0

     - TXACK

     - RO

     - 当作为receiver时，反馈ACK/NACK。

       0：反馈ACK。

       1：反馈NACK。

       以下情况，ACK/NACK不由本位决定：

       slave接收地址时，硬件自动反馈ACK/NACK。

       slave MCDE有效，接收到master code时，硬件自动返回NACK。

       slave接收溢出时，硬件自动反馈NACK。




.. ----------------------------------------------------------------------------------------------------

接收数据寄存器RXDATA
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - RXDATA

     - 0x0C

     - RO

     - 0x00000000

     - 接收数据寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`7` --

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`7` --

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`7` RXDATA



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:8

     - --

     - 

     - --

   * - 7:0

     - RXDATA

     - 

     - 接收数据寄存器

       RXNE为1，表示本寄存器中存在有效数据

       在完成数据接收（不包含ACK/NACK发送）的时刻，更新此寄存器

       slave接收地址字节情况，参见RXDONE位说明




.. ----------------------------------------------------------------------------------------------------

发送数据寄存器TXDATA
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - TXDATA

     - 0x10

     - R/W

     - 0x00000000

     - 发送数据寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`7` --

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`7` --

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`7` TXDATA



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:8

     - --

     - RO

     - --

   * - 7:0

     - TXDATA

     - R/W

     - 发送数据寄存器

       TXE为0，表示本寄存器中存在待发送数据




.. ----------------------------------------------------------------------------------------------------

中断标志寄存器IF
^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - IF

     - 0x14

     - R/W

     - 0x00000001

     - 中断标志寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`5` --

     - MLTO

     - AL

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`5` --

     - RXSTO

     - RXSTA

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`2` --

     - RXDONE

     - TXDONE

     - RXOV

     - RXNE

     - TXE



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:18

     - --

     - RO

     - --

   * - 17

     - MLTO

     - R/W1C

     - Master SCL LOW超时。写1清除。仅在master模式有效。

       0：未超时。

       1：超时。SCL LOW时间超过1024个由CLK寄存器设置的SCL LOW时间。

       【对于golden model，SCL LOW超时时间由MLTO_LIM设置】


   * - 16

     - AL

     - R/W1C

     - Master仲裁丢失总线。写1清除。仅在master模式有效。

       0：无仲裁丢失总线控制权。

       1：仲裁丢失总线控制权。


   * - 15:10

     - --

     - RO

     - --

   * - 9

     - RXSTO

     - R/W1C

     - Slave检测到STOP。写1清除。仅在slave模式下有效。

       0：slave未检测到STOP。

       1：slave检测到STOP。


   * - 8

     - RXSTA

     - R/W1C

     - Slave检测到START。写1清除。仅在slave模式下有效。

       0：slave未检测到START。

       1：slave检测到START。


   * - 7:5

     - --

     - RO

     - --

   * - 4

     - RXDONE

     - R/W1C

     - 接收结束。写1清除，包含ACK/NACK时间。

       0：接收未结束。

       1：接收结束。

       slave接收情况说明：

       Slave器件7位地址模式下，slave地址字节（含R/W位）接收完成，若地址匹配，则生成此中断。

       Slave器件10位地址模式下，slave地址的第2字节（ADDR[7:0]）接收完成，若10位地址匹配，则生成此中断；跟在repeat START之后的slave地址第1字节，若地址8、9位匹配，则生成此中断；跟在START之后的第1字节接收完成后，即使ADDR[9:8]匹配，也不会生成此中断。

       Slave模式，MCDE=1，接收到master code时，会生成此中断。


   * - 3

     - TXDONE

     - R/W1C

     - 发送结束。写1清除，包含ACK/NACK时间。

       0：发送未结束，或没有发送。

       1：发送结束。

       说明：当master模式发送字节发生仲裁丢失总线时，不产生本中断。


   * - 2

     - RXOV

     - R/W1C

     - 接收数据寄存器溢出。软件写1清除。（更新的时刻点，不包含ACK/NACK发送）

       0：无溢出。

       1：当RXDATA非空时，又接收到新的字节，会产生溢出。溢出发生时，新数据丢失。

       说明：对于slave模式，如果STRE位有效，当接收数据寄存器非空，且又接收到新的字节，slave器件会拉低SCL信号，直到RXDATA中的旧数被读走，再把新数存到RXDATA中，此情况不会产生溢出。


   * - 1

     - RXNE

     - R/W1C

     - 接收数据寄存器非空。

       0：接收数据寄存器空，不存在未读取的接收数据。

       1：接收数据寄存器非空，存在未读取的接收数据。

       在接收完数据的时刻更新此位（不包含ACK/NACK发送时间）。

       如果新数据接收完成时，旧数据未及时读取，分如下几种情况处理：

       Master模式：

       新数据丢失。同时置位RXD_OV位。

       Slave模式：

       A．STRE=0：新数据丢失。同时置位RXD_OV位，硬件自动反馈NACK。

       B．STRE=1：正常返回ACK，然后在master发送下一个字节前，slave将SCL hold在低电平，直到旧数据被读走后，再将新数据更新到RXDATA寄存器中。最后释放SCL。


   * - 0

     - TXE

     - R/W1C

     - 发送数据寄存器空。

       0：发送数据寄存器非空，不允许写TXDATA寄存器。

       1：发送数据寄存器空，允许写TXDATA寄存器。

       

       在发送数据开始的时刻，发送数据被硬件读走后，此位被更新为1（此时TXDONE仍为0）。

       向TXDATA寄存器写入新数据，可清除此位。




.. ----------------------------------------------------------------------------------------------------

中断使能寄存器IE
^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - IE

     - 0x18

     - R/W

     - 0x00000001

     - 中断使能寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`5` --

     - MLTO

     - AL

   * - 12

     - 11

     - 10

     - 9

     - 8

     - 10

     - 9

     - 8

   * - :cspan:`5` --

     - RXSTO

     - RXSTA

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`2` --

     - RXDONE

     - TXDONE

     - RXOV

     - RXNE

     - TXE



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:18

     - --

     - RO

     - --

   * - 17

     - MLTO

     - R/W

     - Master SCL LOW超时中断使能。

       0：不使能。

       1：使能。


   * - 16

     - AL

     - R/W

     - Master仲裁丢失总线中断使能。

       0：不使能。

       1：使能。


   * - 15:10

     - --

     - RO

     - --

   * - 9

     - RXSTO

     - R/W

     - Slave检测到STOP中断使能。

       0：不使能。

       1：使能。


   * - 8

     - RXSTA

     - R/W

     - Slave检测到START中断使能。

       0：不使能。

       1：使能。


   * - 7:5

     - --

     - RO

     - --

   * - 4

     - RXDONE

     - R/W

     - 接收数据结束中断使能。

       0：不使能。

       1：使能。


   * - 3

     - TXDONE

     - R/W

     - 发送数据结束中断使能。

       0：不使能。

       1：使能。


   * - 2

     - RXOV

     - R/W

     - 接收数据寄存器溢出中断使能。

       0：不使能。

       1：使能。


   * - 1

     - RXNE

     - R/W

     - 接收数据寄存器非空中断使能。

       0：不使能。

       1：使能。


   * - 0

     - TXE

     - R/W

     - 发送数据寄存器空中断使能。

       0：不使能。

       1：使能。




.. ----------------------------------------------------------------------------------------------------

Master控制寄存器MCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - MCR

     - 0x20

     - R/W

     - 0x00000000

     - Master控制寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`7` --

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`7` --

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`3` --

     - STO

     - WR

     - RD

     - STA



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:5

     - --

     - RO

     - --

   * - 3

     - STO

     - WAC

     - 写1，产生STOP，完成后自动清零。

   * - 2

     - WR

     - WAC

     - 写1，发送TXDATA中数据，完成后（含ACK/NACK时间）自动清零。

       向本位写1前，要求TXDATA不能为空。否则，本位无法设置。

       注意：WR与RD位不能同时写1.


   * - 1

     - RD

     - WAC

     - 写1，接收数据到RXDATA中，完成后（含ACK/NACK时间）自动清零。

   * - 0

     - STA

     - WAC

     - 写1，产生START，完成后自动清零。

       注意：允许STA和WR同时置位，优先发送START。




.. ----------------------------------------------------------------------------------------------------

时序配置寄存器CLK
^^^^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - CLK

     - 0x24

     - R/W

     - 0x00033F7F

     - 时序配置寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`3` --

     - :cspan:`3` SDAH

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`7` DIV

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`7` SCLH

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`7` SCLL



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:28

     - --

     - RO

     - --

   * - 27:24

     - SDAH

     - R/W

     - SDA数据保持时间配置。（对Master和Slave有效）

       对于master：tHD;DAT=(SDAH + 4) * Tpclk

       对于slave：tHD;DAT=(SDAH + DNF + 6) * Tpclk

       注意：如果应用环境比较恶劣，则应注意，出现在SDA数据保持期间的毛刺有可能导致SDA的变化沿提前毛刺宽度的时间（如果此时SCL上无毛刺，则总线上会出现非预期的STA、STOP）。在此情况下，应设置SDAH使得tHD;DAT大于最大的毛刺宽度。


   * - 23:16

     - DIV

     - R/W

     - 时钟预分频，详见SCLH和SCLL描述。（仅对Master模式有效）

       0：1分频

       1：2分频

       2：3分频

       ……

       255：256分频


   * - 15:8

     - SCLH

     - R/W

     - SCL时钟高电平时间配置。（仅对Master模式有效）

       tHIGH=( (SCLH+1) * (DIV+1) + DNF + 6) * Tpclk


   * - 7:0

     - SCLL

     - R/W

     - SCL时钟低电平时间配置。（对Master模式有效；在slave模式下，如果使能了STRETCH功能，且ASDS配置为0，则需要配置本寄存器。在slave写TXDATA后，延迟本寄存器设置的时间，再释放SCL。）

       tLOW=( (SCLL+1) * (DIV+1) + SDAH + 5) * Tpclk

       SCL的周期为tHIGH+tLOW。

       推荐SCLH与SCLL的比例为1:2。




.. note::
   注：示意图如图 6-48所示

.. ----------------------------------------------------------------------------------------------------

Slave控制寄存器SCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - SCR

     - 0x30

     - R/W

     - 0x00000008

     - Slave控制寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`7` --

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`7` --

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`3` --

     - ASDS

     - STRE

     - MCDE

     - SADDR10



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:4

     - --

     - RO

     - --

   * - 3

     - ASDS

     - R/W

     - Stretching后数据建立时间自适应使能。（Adaptive Stretching Data Setup）

       0：自适应不使能。由CLK设置

       1：自适应使能。在接收master地址时，自动检测SCL低电平时间，作为stretching后数据建立时间。

       Slave-transmitter，当STRECH寄存器设置为有效，且发生stretching的情况，在新数据准备好后，salve会继续拉低SCL一段时间，以保证SDA线上满足数据建立时间的要求。


   * - 2

     - STRE

     - R/W

     - Clock stretching使能控制。

       0：Clock stretching不使能。

       1：Clock stretching使能。

       （slave作为receiver时，当接收到新数据，但旧数据未被及时读取（RXNE=1）：SLVSTR变有效，在返回ACK后，将SCL hold在低电平，直到旧数据被读取后，把新数据更新到RXDATA中，同时SLVSTR变无效，再释放SCL，开始下一个数据的接收。

       slave作为transmitter时，当发送结束（TXDONE=1，含接收ACK/NACK时间），但新数据未准备好（TXE=1）：SLVSTR变有效，将SCL hold在低电平，直到新数据准备好，延迟SCLL时间后，SLVSTR变无效，再释放SCL，开始新数据的发送。）


   * - 1

     - MCDE

     - R/W

     - Master Code Detect Enable.

       0：不检测master code。

       1：检测master code。

       本位有效时，slave在START之后检测到master code，会生成RXDONE中断，并硬件设置SLVRDS为11。软件应保证slave地址设置不与master code冲突。


   * - 0

     - SADDR10

     - R/W

     - slave地址模式控制。

       0：7位地址模式

       1：10位地址模式




.. ----------------------------------------------------------------------------------------------------

Slave地址寄存器SADDR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. flat-table::
   :class: tight-table-reg-info
   :header-rows: 1

   * - 寄存器

     - 偏移

     - 类型

     - 复位值

     - 描述

   * - SADDR

     - 0x34

     - R/W

     - 0x00000000

     - Slave地址寄存器



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-fields

   * - 31

     - 30

     - 29

     - 28

     - 27

     - 26

     - 25

     - 24

   * - :cspan:`7` --

   * - 23

     - 22

     - 21

     - 20

     - 19

     - 18

     - 17

     - 16

   * - :cspan:`6` MASK7

     - MASK10

   * - 15

     - 14

     - 13

     - 12

     - 11

     - 10

     - 9

     - 8

   * - :cspan:`5` --

     - :cspan:`1` ADDR10

   * - 7

     - 6

     - 5

     - 4

     - 3

     - 2

     - 1

     - 0

   * - :cspan:`6` ADDR7

     - ADDR0



.. ----------------------------------------------------------------------------------------------------

.. flat-table::
   :class: tight-table-reg-desc
   :header-rows: 1

   * - 位域

     - 名称

     - 类型

     - 描述

   * - 31:24

     - --

     - RO

     - --

   * - 23:17

     - MASK7

     - R/W

     - Slave对应地址位掩码。

       0：不掩码。

       1：掩码对应位地址。掩码后，硬件匹配slave地址时，忽略被掩码的地址位。

       对于10位地址模式，RXDATA仅保存ADDR[7:0]，所以不支持对ADDR[9:8]的mask。


   * - 16

     - MASK10

     - R/W

     - Slave对应地址位掩码。

   * - 15:10

     - --

     - RO

     - --

   * - 9:8

     - ADDR10

     - R/W

     - 10位地址模式：地址bit9~bit8

   * - 7:1

     - ADDR7

     - R/W

     - 地址bit7~bit1

   * - 0

     - ADDR0

     - R/W

     - 10位地址模式：地址bit0



